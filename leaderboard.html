<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Classifica</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="leaderboard">
        <h1>Classifica</h1>
        <img id="winImage" src="images/giantbaby.png" alt="Congratulazioni!">
        <table>
            <thead>
                <tr>
                    <th>Nome</th>
                    <th>Tentativi</th>
                </tr>
            </thead>
            <tbody id="leaderboardData"></tbody>
        </table>
        <footer>
            <a href="index.html">Torna al gioco</a>
        </footer>
    </div>

    <!-- Footer con nomi -->
    <footer>
        <p>&copy; V.Colonnese e D.Trambarulo</p>
    </footer>

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-database-compat.js"></script>

    <!-- Configurazione Firebase -->
    <script>
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_AUTH_DOMAIN",
            databaseURL: "YOUR_DATABASE_URL",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_STORAGE_BUCKET",
            messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
            appId: "YOUR_APP_ID"
        };
        const app = firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
    </script>

    <script>
        // Carica i dati della leaderboard
        function loadLeaderboard() {
            const leaderboardTable = document.getElementById("leaderboardData");
            leaderboardTable.innerHTML = "";

            firebase.database().ref('leaderboard').once('value', (snapshot) => {
                const data = snapshot.val();
                if (!data) {
                    console.log("Nessun dato trovato nella leaderboard.");
                    return;
                }
                const leaderboard = [];
                for (let id in data) {
                    leaderboard.push(data[id]);
                }
                leaderboard.sort((a, b) => a.attempts - b.attempts).slice(0, 10);
                leaderboard.forEach((entry) => {
                    const row = document.createElement("tr");
                    row.innerHTML = `<td>${entry.name}</td><td>${entry.attempts}</td>`;
                    leaderboardTable.appendChild(row);
                });
            });
        }

        // Inizializza la leaderboard quando la pagina Ã¨ caricata
        window.onload = function() {
            loadLeaderboard();
        };
    </script>
</body>
</html>
